# tg-bot-calorie-tracker

Телеграм-бот для отслеживания физической активности, трекинга потребления воды и еды.

Бот использует
* aiogram - для Telegram API
* FastAPI - backend
* Postgres - база данных

Бот имеет следующие хэндлеры:
* `/start` - Приветственное сообщение. Проверяет соединение с FastAPI и БД.
* `/new_user` - Создает нового пользователя
* `/delete_user` - Удаляет пользовательские данные
* `/log_food` - Записывает данные о потребленной пище. Калорийность берется по АПИ U.S. Department of Agriculture. Для работы необходим токен. Ссылка на портал: https://fdc.nal.usda.gov/
* `/check_today_intake` - Возвращает информацию о потребленных калориях за сегодня
* `/log_water` - Записывает количество потребленной воды
* `/check_today_water` - Возвращает количество потребленной воды за сегодня
* `/log_workout` - Записывает информацию о завершенных тренировках. Поддерживаются 3 вида тренировок: Jogging, Cycling, Weight Lifting. Для каждого вида используются свои коэффициенты для затраченных калориях и рекомендации по восполнению водного баланса. Учитывается погода. Данные о погоде берутся с портала OpenWeatherMap API. Для работы нужен токен. Ссылка на портал: https://openweathermap.org/
* `/check_today_workouts` - Возвращает информацию о тренировках за сегодня
* `/summary` - Возвращает полную информацию за сегодня о затраченных калориях, воде и физической активности.

Папка `img/` содержит демонстрацию работы сервиса

Сервис запускается командой:

`docker compose up --build`

Необходимые системные переменные:
* BOT_TOKEN
* FOOD_API_KEY
* WEATHER_API_KEY
* POSTGRES_DB
* POSTGRES_USER
* POSTGRES_PASSWORD
* FASTAPI_URL=http://tg_fastapi:8000
